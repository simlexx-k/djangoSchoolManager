{% extends 'admin/base.html' %}
{% load static %}

{% block title %}Student Details - {{ student.name }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    <!-- Student Details Card -->
    <div class="bg-white shadow-lg rounded-lg overflow-hidden">
        <!-- Header Section -->
        <div class="bg-gradient-to-r from-blue-500 to-blue-600 p-6">
            <div class="flex justify-between items-center">
                <h1 class="text-3xl font-bold text-blue-600">Student Details</h1>
                <div class="space-x-2">
                    <a href="{% url 'student_update' student.pk %}" class="bg-yellow-400 hover:bg-yellow-500 text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out">
                        <i class="fas fa-edit mr-2"></i>Edit
                    </a>
                    <a href="{% url 'student_delete' student.pk %}" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out">
                        <i class="fas fa-trash mr-2"></i>Delete
                    </a>
                </div>
            </div>
        </div>

        <!-- Body Section -->
        <div class="p-6">
            <!-- Personal and Academic Information -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <!-- Personal Information -->
                <div class="bg-gray-50 p-6 rounded-lg shadow-sm">
                    <h2 class="text-xl font-semibold mb-4 text-blue-600">Personal Information</h2>
                    <div class="space-y-3">
                        <p><strong>Name:</strong> {{ student.name }}</p>
                        <p><strong>Student ID:</strong> {{ student.learner_id }}</p>
                        <p><strong>Date of Birth:</strong> {{ student.date_of_birth }}</p>
                        <p><strong>Gender:</strong> {{ student.gender }}</p>
                    </div>
                </div>

                <!-- Academic Information -->
                <div class="bg-gray-50 p-6 rounded-lg shadow-sm">
                    <h2 class="text-xl font-semibold mb-4 text-blue-600">Academic Information</h2>
                    <div class="space-y-3">
                        <p><strong>Grade:</strong> {{ student.grade.grade_name }}</p>
                        <p><strong>Registration Date:</strong> {{ student.register_date }}</p>
                    </div>
                </div>
            </div>

            <!-- Finance Information -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm mb-8">
                <h2 class="text-xl font-semibold mb-4 text-blue-600">Finance Information</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <p><strong>Fee Payable:</strong> {{ fee_record.amount }}</p>
                    <p><strong>Fee Paid:</strong> {{ fee_record.paid_amount }} <small>paid on</small> {{ fee_record.paid_date }}</p>
                    <p><strong>Fee Balance:</strong> {{ fee_record.balance }}</p>
                    <p><strong>Maize Balance:</strong> {{ student.maize_balance }}</p>
                    <p><strong>Beans Balance:</strong> {{ student.beans_balance }}</p>
                </div>
            </div>

            <!-- Parent/Guardian Information -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm">
                <h2 class="text-xl font-semibold mb-4 text-blue-600">Parent/Guardian Information</h2>
                {% if student.parent %}
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <p><strong>Name:</strong> {{ student.parent.first_name }} {{ student.parent.last_name }}</p>
                        <p><strong>Email:</strong> {{ student.parent.email }}</p>
                        <p><strong>Phone Number:</strong> {{ student.parent.phone_number }}</p>
                        <p><strong>Address:</strong> {{ student.parent.address }}</p>
                        <p><strong>Occupation:</strong> {{ student.parent.occupation }}</p>
                        <p><strong>Relationship:</strong> {{ student.parent.relationship_to_learner }}</p>
                    </div>
                {% else %}
                    <p class="text-gray-600">No parent/guardian information available.</p>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Back Button -->
    <div class="mt-6">
        <a href="{% url 'student_management' %}" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out">
            <i class="fas fa-arrow-left mr-2"></i>Back to Student List
        </a>
    </div>
</div>
{% endblock %}